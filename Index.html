<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Diwali ‚ú®</title>
  <style>
    /* Reset */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}

    /* Page background */
    body{
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(ellipse at 10% 10%, #1b2735 0%, #090a0f 40%), linear-gradient(180deg,#071230 0%, #081226 100%);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
      overflow:hidden;
    }

    /* Card */
    .card{
      width:min(960px,94vw);
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius:24px;
      padding:36px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      position:relative;
      overflow:hidden;
      backdrop-filter: blur(6px) saturate(120%);
    }

    h1{
      font-size:clamp(28px,5vw,56px);
      letter-spacing:1px;
      margin-bottom:10px;
      display:flex;
      align-items:center;
      gap:14px;
    }

    .emoji{
      font-size:1.1em;
      transform:translateY(-2px);
    }

    p.lead{
      opacity:0.9;
      margin-bottom:22px;
      line-height:1.4;
      font-size:clamp(14px,2.2vw,18px);
    }

    /* Diyas */
    .diyas{
      display:flex;
      gap:14px;
      margin-bottom:16px;
    }
    .diya{
      width:86px;
      height:86px;
      border-radius:12px;
      background:linear-gradient(180deg,#ff9a00,#c94a00);
      position:relative;
      box-shadow: 0 8px 22px rgba(201,74,0,0.28), 0 2px 6px rgba(0,0,0,0.5) inset;
      display:flex;
      align-items:center;
      justify-content:center;
      transform-origin:center bottom;
      animation: float 4s ease-in-out infinite;
    }
    .diya:nth-child(2){animation-delay:-0.8s}
    .diya:nth-child(3){animation-delay:-1.6s}

    .flame{
      width:26px;height:40px;border-radius:50% 50% 40% 40%/60% 60% 40% 40%;
      background: radial-gradient(circle at 30% 30%, #fff3c4 0%, #ffd76b 20%, #ff7b00 65%);
      transform-origin:center bottom;
      filter:drop-shadow(0 6px 12px rgba(255,120,30,0.22));
      animation: flicker 1.8s infinite;
    }

    /* Greeting glow */
    .greeting{
      display:inline-block;
      padding:12px 18px;
      border-radius:999px;
      font-weight:600;
      box-shadow:0 6px 30px rgba(255,160,60,0.12);
      background:linear-gradient(90deg, rgba(255,200,80,0.08), rgba(255,110,60,0.04));
      backdrop-filter: blur(6px);
      margin-left:auto;
    }

    /* Fireworks canvas */
    .fw{
      position:absolute;inset:0;pointer-events:none;
    }

    /* Animated sparkles */
    .sparkles{position:absolute;inset:0}
    .spark{position:absolute;width:6px;height:6px;border-radius:50%;background:transparent;box-shadow:0 0 18px 6px rgba(255,200,60,0.08);opacity:0.9;animation: rise 6s linear infinite}

    /* Buttons */
    .actions{display:flex;gap:12px;margin-top:14px}
    .btn{padding:10px 14px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.08);cursor:pointer;font-weight:600}
    .btn:active{transform:translateY(1px)}

    /* Footer text */
    .small{font-size:13px;opacity:0.7;margin-top:8px}

    /* Keyframes */
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)}}
    @keyframes flicker{
      0%{transform:scaleY(1)}
      10%{transform:scaleY(0.92)}
      20%{transform:scaleY(1.04)}
      30%{transform:scaleY(0.96)}
      40%{transform:scaleY(1.02)}
      100%{transform:scaleY(1)}
    }

    @keyframes rise{
      0%{transform:translateY(100vh) scale(0.6);opacity:0}
      10%{opacity:1}
      80%{opacity:0.9}
      100%{transform:translateY(-10vh) scale(1);opacity:0}
    }

    /* Responsive layout */
    .layout{display:flex;gap:22px;align-items:center}
    @media (max-width:720px){
      .layout{flex-direction:column;align-items:flex-start}
      .diyas{justify-content:flex-start}
    }

    /* Decorative border lights */
    .border-lights{position:absolute;inset:10px;border-radius:20px;padding:8px;pointer-events:none}
    .border-lights:before{content:'';position:absolute;inset:0;border-radius:18px;box-shadow:0 0 40px 12px rgba(255,160,60,0.02) inset}

  </style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="title">
    <div class="layout">
      <div style="flex:1">
        <h1 id="title"><span class="emoji">ü™î</span> Happy Diwali <span class="greeting">May your life shine bright</span></h1>
        <p class="lead">Wishing you a Diwali filled with sweets, light, laughter and endless moments of happiness. May the festival of lights brighten your days and warm your heart.</p>

        <div class="diyas" aria-hidden="true">
          <div class="diya"><div class="flame"></div></div>
          <div class="diya"><div class="flame"></div></div>
          <div class="diya"><div class="flame"></div></div>
        </div>

        <div class="actions">
          <button class="btn" onclick="downloadCard()">Download as image</button>
          <button class="btn" onclick="toggleFireworks()">Toggle Fireworks</button>
        </div>

        <div class="small">Made with ‚ù§Ô∏è ‚Äî Share this with friends & family</div>
      </div>

      <div style="width:220px;display:flex;justify-content:center;align-items:center;">
        <!-- Decorative lantern / illustration -->
        <svg width="160" height="160" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="g1" x1="0" x2="1">
              <stop offset="0" stop-color="#ffd76b" />
              <stop offset="1" stop-color="#ff7b00" />
            </linearGradient>
          </defs>
          <g transform="translate(10,10)">
            <ellipse cx="50" cy="30" rx="40" ry="24" fill="#0b2540" opacity="0.55" />
            <rect x="22" y="10" width="56" height="64" rx="12" fill="url(#g1)" />
            <path d="M28 62c0-10 46-10 46 0v6H28v-6z" fill="#8b2e00" opacity="0.15"/>
            <circle cx="50" cy="35" r="18" fill="#fff3c4" opacity="0.14" />
          </g>
        </svg>
      </div>
    </div>

    <canvas class="fw" id="fireworks"></canvas>
    <div class="sparkles" id="sparkles"></div>
    <div class="border-lights"></div>
  </div>

  <script>
    // Simple fireworks using canvas
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = innerWidth;
    let H = canvas.height = innerHeight;
    let running = true;

    window.addEventListener('resize',()=>{W=canvas.width=innerWidth;H=canvas.height=innerHeight});

    function rand(min,max){return Math.random()*(max-min)+min}

    class Particle{
      constructor(x,y,dx,dy,color,r){this.x=x;this.y=y;this.dx=dx;this.dy=dy;this.color=color;this.r=r;this.life=1}
      update(){this.x+=this.dx;this.y+=this.dy;this.dy+=0.02;this.dx*=0.99;this.dy*=0.999;this.life-=0.008}
      draw(){ctx.beginPath();ctx.globalAlpha=Math.max(0,this.life);ctx.fillStyle=this.color;ctx.arc(this.x,this.y,this.r,0,Math.PI*2);ctx.fill()}
    }

    let particles=[];

    function explode(x,y){
      const hue = Math.floor(rand(20,50));
      const count = Math.floor(rand(20,36));
      for(let i=0;i<count;i++){
        const a = Math.random()*Math.PI*2;
        const s = rand(1.6,4.6);
        const color = `hsl(${hue + Math.floor(rand(-20,20))} 100% ${rand(45,65)}%)`;
        particles.push(new Particle(x,y,Math.cos(a)*s,Math.sin(a)*s,color,rand(1,3)));
      }
    }

    function loop(){
      if(!running) return requestAnimationFrame(loop);
      ctx.clearRect(0,0,W,H);
      if(Math.random()<0.012) explode(rand(100,W-100), rand(80,H-200));
      for(let i=particles.length-1;i>=0;i--){
        const p=particles[i];p.update();p.draw();if(p.life<=0) particles.splice(i,1);
      }
      requestAnimationFrame(loop);
    }
    loop();

    // sparkles (floating dots) using simple DOM elements
    const sparkles = document.getElementById('sparkles');
    function makeSpark(){
      const s = document.createElement('div');
      s.className='spark';
      s.style.left = Math.random()*100 + '%';
      s.style.top = (60 + Math.random()*30) + '%';
      s.style.opacity = Math.random();
      s.style.transform = `translateY(${Math.random()*40}px) scale(${0.6+Math.random()*0.8})`;
      s.style.animationDuration = 4 + Math.random()*6 + 's';
      sparkles.appendChild(s);
      setTimeout(()=>s.remove(),10000);
    }
    setInterval(makeSpark,450);

    function toggleFireworks(){running = !running; if(running) loop();}

    // download as image (card only)
    async function downloadCard(){
      const card = document.querySelector('.card');
      // use html2canvas-like approach: we will open print view as fallback
      try{
        const data = await (async ()=>{
          // Minimal fallback: take canvas snapshot combined with stylesheet is complex without library
          // So open a new window with a simplified version for printing/saving
          const w = window.open('', '_blank');
          const html = `<!doctype html><html><head><meta charset='utf-8'><title>Happy Diwali</title></head><body style='background:#081226;color:#fff;font-family:Arial;padding:30px;'>${card.innerHTML}</body></html>`;
          w.document.write(html);w.document.close();
          w.focus();
          return true;
        })();
        if(data) alert('A new window opened. Use browser Print or Save to create an image/PDF.');
      }catch(e){alert('Could not prepare download ‚Äî your browser may block this feature.')}
    }

    // Accessibility: reduce motion if user prefers
    if(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
      document.querySelectorAll('.diya, .flame').forEach(el=>el.style.animation='none');
    }
  </script>
</body>
</html>
